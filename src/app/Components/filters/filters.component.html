<div class="bg-white border border-gray-200 rounded-lg p-5 space-y-5">

  <!-- Header con título y botón de limpiar -->
  <div class="flex items-center justify-between">
    <h3 class="text-sm font-medium text-gray-600">Transaction Type</h3>

    <!-- Botón discreto para limpiar filtros -->
    <button *ngIf="getActiveFiltersCount() > 0" (click)="clearAllFilters()"
      class="text-xs text-red-500 hover:text-red-700 px-2 py-1 rounded hover:bg-red-100 transition-colors">
      Clear filters ({{ getActiveFiltersCount() }})
    </button>
  </div>

  <!-- Filtros por tipo -->
  <div class="space-y-3">
    <div class="flex flex-wrap gap-2">
      <button (click)="emitByType('all')"
        [class]="selectedType === 'all' 
          ? 'px-4 py-2 text-sm font-medium rounded-md bg-blue-50 text-blue-700 border border-blue-200' 
          : 'px-4 py-2 text-sm font-medium rounded-md border border-gray-200 text-gray-600 hover:bg-gray-50 hover:border-gray-300'">
        All
      </button>

      <button (click)="emitByType('income')"
        [class]="selectedType === 'income' 
          ? 'px-4 py-2 text-sm font-medium rounded-md bg-green-50 text-green-700 border border-green-200' 
          : 'px-4 py-2 text-sm font-medium rounded-md border border-gray-200 text-gray-600 hover:bg-gray-50 hover:border-gray-300'">
        Income
      </button>

      <button (click)="emitByType('expense')"
        [class]="selectedType === 'expense' 
          ? 'px-4 py-2 text-sm font-medium rounded-md bg-red-50 text-red-700 border border-red-200' 
          : 'px-4 py-2 text-sm font-medium rounded-md border border-gray-200 text-gray-600 hover:bg-gray-50 hover:border-gray-300'">
        Expense
      </button>
    </div>
  </div>

  <!-- Filtros principales -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">

    <!-- Filtro por categoría -->
    <div class="space-y-2">
      <label class="block text-sm font-medium text-gray-600">Category</label>
      <select [(ngModel)]="categorySelected" (ngModelChange)="emitByCategory($event)"
        class="w-full px-3 py-2 rounded-md border border-gray-300 text-sm focus:border-blue-400 focus:outline-none">
        <option value="all">All Categories</option>
        <option *ngFor="let c of filteredCategories" class="capitalize" [value]="c">{{ c }}</option>
      </select>
    </div>

    <!-- Filtro por fecha -->
    <div class="space-y-2">
      <label class="block text-sm font-medium text-gray-600">Date</label>
      <input [(ngModel)]="selectedDate" (ngModelChange)="emitByDate($event)" type="date"
        class="w-full px-3 py-2 rounded-md border border-gray-300 text-sm focus:border-blue-400 focus:outline-none" />
    </div>

    <!-- Filtro por monto -->
    <div class="space-y-2">
      <label class="block text-sm font-medium text-gray-600">
        Amount Range
        <span class="text-xs text-gray-500 font-normal">
          ({{ currentTransactionType }})
        </span>
      </label>
      <div class="space-y-2">
        <div class="flex items-center justify-between text-xs text-gray-500">
          <span>{{ formatAmount(minAmount) }}</span>
          <span>{{ formatAmount(maxAmount) }}</span>
        </div>
        <input [(ngModel)]="selectedAmount" (ngModelChange)="emitByAmount($event)" type="range" [min]="minAmount"
          [max]="maxAmount" [step]="stepAmount"
          class="w-full h-1.5 bg-gray-200 rounded-full appearance-none cursor-pointer" />
        <div class="text-center">
          <span class="text-xs text-blue-600">
            {{ formatAmount(selectedAmount) }} or more
          </span>
        </div>
      </div>
    </div>

    <!-- Búsqueda -->
    <div class="space-y-2">
      <label class="block text-sm font-medium text-gray-600">Search</label>
      <input [(ngModel)]="search" (ngModelChange)="emitBySearch($event)" type="text"
        placeholder="Search transactions..."
        class="w-full px-3 py-2 rounded-md border border-gray-300 text-sm focus:border-blue-400 focus:outline-none placeholder-gray-400" />
    </div>
  </div>

</div>